<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Zemian's Blog - Switching Different JDK in Cygwin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="../../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../../css/asciidoctor.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link href="../../../css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="../../../favicon.ico">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../../">Zemian's Blog</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../../../index.html">Home</a></li>
            <li><a href="../../../about.html">About</a></li>
            <li><a href="../../../archive.html">Archive</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">	
	<div class="page-header">
		<h1>Switching Different JDK in Cygwin</h1>
	</div>

	<p><em>24 March 2018</em></p>

	<p><div class="paragraph">
<p>I love to use bash shell terminal. It&#8217;s a much more powerful terminal to do everyday tasks. Even in Windows, I can get most of what I need using Cygwin. Unfortunately Java executable are native to OS only, and for Windows, it would still work under Cygwin, but all the file system paths are still native. Java can understand the mixed-path though, and it has made somewhat easier than the Windows native backward slash path like typing. This means we can define <code>JAVA_HOME</code> variable using mixed path mode. In Cygwin, I define my <code>.bashrc</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>export JAVA_HOME=C:/Users/zemian/apps/jdk-8u161
PATH=$HOME/apps/jdk-8u161/bin:$PATH</pre>
</div>
</div>
<div class="paragraph">
<p>I sometimes work with different version of JDK for various application testing. In this case, I need a way to quicly switch JDK version in my shell env. To make it easier, I have installed all of my JDK in a <code>$HOME/apps</code> directory, and created symbolic links to each JDKs like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd $HOME/apps
ls -ld jdk*

drwx------+ 1 zemian staff 0 Mar 24 16:58 jdk-8u161
drwx------+ 1 zemian staff 0 Mar 24 10:57 jdk-9.0.4
drwx------+ 1 zemian staff 0 Mar 24 10:48 jdk-10

lrwxrwxrwx  1 zemian staff 9 Mar 24 16:55 jdk8 -&gt; jdk-8u161
lrwxrwxrwx  1 zemian staff 9 Mar 24 11:02 jdk9 -&gt; jdk-9.0.4
lrwxrwxrwx  1 zemian staff 6 Mar 24 11:00 jdk10 -&gt; jdk-10</pre>
</div>
</div>
<div class="paragraph">
<p>Now that each JDK has a nice consistent version number in path, then I create a shell function like this to switch between them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Switching Multiple JDK
switchjava() {
	JDK="jdk$1"
	if [[ ! -d $APPS_DIR/$JDK ]]; then
		echo "ERROR: JDK path not found: $APPS_DIR/$JDK"
		return
	fi
	export JAVA_HOME=`cygpath -wm $APPS_DIR/$JDK`
	export PATH=$APPS_DIR/$JDK/bin:$PATH

	# Verifying java
	echo "Switched JAVA_HOME to $JAVA_HOME"
	echo "Java Path:"
	which java
	echo "Java Version:"
	java -version
}</pre>
</div>
</div>
<div class="paragraph">
<p>To put it in use, it looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ switchjava 9
Switched JAVA_HOME to C:/Users/zemian/apps/jdk-9.0.4
Java Path:
/home/zemian/apps/jdk9/bin/java
Java Version:
openjdk version "9.0.4"
OpenJDK Runtime Environment (build 9.0.4+11)
OpenJDK 64-Bit Server VM (build 9.0.4+11, mixed mode)

$ switchjava 8
Switched JAVA_HOME to C:/Users/zemian/apps/jdk-8u161
Java Path:
/home/zemian/apps/jdk8/bin/java
Java Version:
java version "1.8.0_161"
Java(TM) SE Runtime Environment (build 1.8.0_161-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)</pre>
</div>
</div></p>

	<hr />
	
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2011 - 2019 Zemian Deng All Rights Reserved| Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.6.3</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../../js/jquery-1.11.1.min.js"></script>
    <script src="../../../js/bootstrap.min.js"></script>
    <script src="../../../js/prettify.js"></script>
    
  </body>
</html>