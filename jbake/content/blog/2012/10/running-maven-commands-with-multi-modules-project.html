title=Running maven commands with multi modules project
date=2012-10-14
type=post
tags=maven
status=published
~~~~~~
<p>Have you ever tried running Maven commands inside a sub-module of a multi modules Maven project, and get <code>Could not resolve dependencies for project</code> error msg? And you checked the dependencies that it's missing are those sister modules within the same project! So what gives? It turns out you have to give few more options to get this running correctly, and you have to remember always stays in the parent pom directory to run it!</p>

<p>For exmaple if you checkout the TimeMachine scheduler project, you can invoke the <code>timemachine-hibernate</code> module with maven commands like this:</p>

<pre><code>bash&gt; hg clone https://bitbucket.org/timemachine/scheduler
bash&gt; cd scheduler
bash&gt; mvn -pl timemachine-hibernate -am clean test-compile
</code></pre>

<p>You can start the scheduler using Maven like this (remember to stay in the parent pom directory!):</p>

<pre><code>bash &gt; mvn -pl timemachine-scheduler exec:java -Dexec.mainClass=timemachine.scheduler.tool.SchedulerServer -Dexec.classpathScope=test
</code></pre>

<p>I have added the <code>-Dexec.classpathScope=test</code> so you will see logging output, because there is an <code>log4j.properties</code> in the classpath for testing.</p>

<p>Without these, you can always run <code>mvn install</code> in the project root directory, then you can cd into any sub-module and run Maven commands. However you will have to keep a tab on what changed in the dependencies, even if they are in sister modules.</p>

<p>You can read more from this <a href="http://www.sonatype.com/people/2009/10/maven-tips-and-tricks-advanced-reactor-options">article</a> from Sonatype.</p>
