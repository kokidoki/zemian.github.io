title=Exploring Apache Camel Core - Timer Component
date=2013-09-01
type=post
tags=camel
status=published
~~~~~~
<div class="paragraph">
<p>Camel Timer is a simple and yet useful component.
It brings the JDK&#8217;s timer functionality into your camel Route with very simple config.</p>
</div>
<div class="listingblock">

<div class="content monospaced">
<pre>   from("timer://mytimer?period=1000")
    .process(new Processor() {
        public void process(Exchange msg) {
            LOG.info("Processing {}", msg);
        }
    });</pre>
</div>
</div>
<div class="paragraph">
<p>That will generate a timer event message every second. You may short hand <code>1000</code> with
<code>1s</code> instead. It supports <code>m</code> for minutes, or <code>h</code> for hours as well. Pretty handy.</p>
</div>
<div class="paragraph">
<p>Another useful timer feature is that it can limit (stop) the number of timer messages after a certain
count. You simply need to add <code>repeatCount</code> option toward the url.</p>
</div>
<div class="paragraph">
<p>Couple of properties from the event message would be useful when handling the timer
message. Here is an example how to read them.</p>
</div>
<div class="listingblock">

<div class="content monospaced">
<pre>   from("timer://mytimer?period=1s&amp;repeatCount=5")
    .process(new Processor() {
        public void process(Exchange msg) {
            java.util.Date fireTime = msg.getProperty(Exchange.TIMER_FIRED_TIME, java.util.Date.class);
            int eventCount = msg.getProperty(Exchange.TIMER_COUNTER, Integer.class);
            LOG.info("We received {}th timer event that was fired on {}", eventCount, fireTime);
        }
    });</pre>
</div>
</div>
<div class="paragraph">
<p>There are more options availabe from <a href="http://camel.apache.org/timer.html">Timer</a> component
that you may explore.
<a href="http://saltnlight5.blogspot.com/2013/08/getting-started-with-apache-camel-using.html">Try it out with a Route</a>
and see it for yourself.</p>
</div>


