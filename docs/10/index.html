<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Zemian's Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/asciidoctor.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="../favicon.ico">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/index.html">Zemian's Blog</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../about.html">About</a></li>
            <li><a href="../archive.html">Archive</a></li>
            <li><a href="..//tags">Tags</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">
  			<a href="blog/2016/06/how-to-setup-hg-repository-on-a-remote-server.html"><h1>How to setup hg repository on a remote server</h1></a>
  			<p>14 June 2016, tags: 
			    <a href="../tags/hg.html">hg</a> 
  			</p>
  			<p><p>I love using mercurial source control! It's easy to use and it works as I expected everytime I need to do something with my source repository. Here is how you can quickly create a remote repository to push your existing project into it. (use this as backup of your project or share among your team etc)</p>
<ol>
<li>
<p>SSH into your remote server and create an empty repository.<br />
ssh remote_hostname<br />
bash&gt; cd $HOME<br />
bash&gt; mkdir -p hg-repos/myproject<br />
bash&gt; cd hg-repos/myproject<br />
bash&gt; hg init</p>
</li>
<li>
<p>Back on your local machine and in your existing hg project, edit the .hg/hgrc file with the following:</p>
</li>
</ol>
<p>[paths]<br />
default=<a href="ssh://remote_hostname/hg-repos/myproject">ssh://remote_hostname/hg-repos/myproject</a><br />
[ui]<br />
remotecmd=/usr/local/bin/hg</p>
<p>That's it! You don't even need hg server running in remote host to make this work! Now you may perofrm &quot;hg push&quot; command inside your local project to sync up to remote host</p>
<p>NOTE 1: This setup rely on your SSH into remote host. If you want to avoid user password promt everytime you perform &quot;hg push&quot;, then setup Key-Based SSH login.</p>
<p>NOTE 2: You only need &quot;remotecmd&quot; part if your remote_hostname does not have a standard hg installed. Then you can specified your custom location here.</p>
<p>NOTE 3: If you want to use abolute path for &quot;default&quot; path instead, then you can use double slash after the &quot;remote_hostname&quot;. Else the single slash is relative to your $HOME directory.</p>
</p>
  			<a href="blog/2015/11/java-jdbc-test-for-utf8-and-default-value-for-timestamp.html"><h1>Java Jdbc Test for UTF8 and Default Value for TIMESTAMP</h1></a>
  			<p>02 November 2015, tags: 
			    <a href="../tags/java.html">java</a> 

			    <a href="../tags/jdbc.html">jdbc</a> 
  			</p>
  			<p><p>Just a quick MySQL test on how to use UTF8 encoding with JDBC connection string. Also a test on how to set TIMESTAMP default values.</p>
<pre><code>package zemian.jdbc;

import org.junit.Test;

import java.sql.*;
import java.util.*;
import java.util.Date;

/**

 -- drop table ztest_issues;
 CREATE TABLE ztest_issues(
 id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
 , title VARCHAR(64) NOT NULL
 , summary TEXT NULL
 , priority INT NOT NULL DEFAULT 5
 , cdate DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
 );

 INSERT INTO ztest_issues(title) VALUES('test');
 INSERT INTO ztest_issues(title, summary) VALUES('test2', 'Just a test');
 INSERT INTO ztest_issues(title, summary, priority) VALUES('test2', 'Just a test', 1);
 INSERT INTO ztest_issues(title, summary, priority, cdate) VALUES('test2', 'Just a test', 1, '2010-12-31 08:00:00');

 --INSERT INTO ztest_issues(title, summary) VALUES('locale test1', LOAD_FILE('C:/data/tmp/test.xml'));
 --INSERT INTO ztest_issues(title, summary) VALUES('locale test2', LOAD_FILE('C:/data/tmp/test2.xml'));
 --INSERT INTO ztest_issues(title, summary) VALUES('locale test3', LOAD_FILE('C:/data/tmp/test3.xml'));

 SELECT * FROM ztest_issues;

 NOTE:
 CURRENT_TIMESTAMP is version specific and is now allowed for DATETIME columns as of version 5.6 http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html

 For 5.6 &lt;, use TIMESTAMP for cdate field instead.

 cdate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
 cdate DATETIME NULL

 NOTE2:
 cdate DATETIME NOT NULL DEFAULT 0

 If you were to use default to ZERO, then you would need this properties in conn string. Else you will fail to get ZERO date value into Java.

 You need to tell the JDBC driver to convert them to NULL. This is done by passing a connection property name zeroDateTimeBehavior with the value convertToNull

 For more details see the manual: http://dev.mysql.com/doc/refman/4.1/en/connector-j-installing-upgrading.html

 */
public class ZtestIssuesJdbcTest {
//    String url = &quot;jdbc:mysql://localhost/test&quot;;
//    String url = &quot;jdbc:mysql://localhost/test?zeroDateTimeBehavior=convertToNull&quot;;
    String url = &quot;jdbc:mysql://localhost/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;connectionCollation=utf8_general_ci&amp;zeroDateTimeBehavior=convertToNull&quot;;
    String username = &quot;test&quot;;
    String password = &quot;test123&quot;;

    @Test
    public void testShowTableLocale() throws Exception {
        try (Connection conn = DriverManager.getConnection(url, username, password)) {
            String sql = &quot;SHOW VARIABLES LIKE 'char%'&quot;;
            System.out.println(&quot;Sql:&quot; + sql);
            Statement sm = conn.createStatement();
            ResultSet rs = sm.executeQuery(sql);
            while (rs.next()) {
                System.out.printf(&quot;%s\t%s\n&quot;, rs.getObject(1), rs.getObject(2));
            }

            sql = &quot;SHOW CREATE TABLE ztest_issues&quot;;
            System.out.println(&quot;Sql:&quot; + sql);
            sm = conn.createStatement();
            rs = sm.executeQuery(sql);
            while (rs.next()) {
                System.out.printf(&quot;%s\t%s\n&quot;, rs.getObject(1), rs.getObject(2));
            }
        }
    }

    @Test
    public void testQuery() throws Exception {
        try (Connection conn = DriverManager.getConnection(url, username, password)) {
            String sql = &quot;SELECT id, cdate, title, summary FROM ztest_issues&quot;;
            System.out.println(&quot;Sql:&quot; + sql);
            Statement sm = conn.createStatement();
            ResultSet rs = sm.executeQuery(sql);
            while (rs.next()) {
                System.out.printf(&quot;%d\t%s\t%s\t%s\n&quot;, rs.getObject(1), rs.getObject(2), rs.getObject(3), rs.getObject(4));
            }
        }
    }

    @Test
    public void testInsert() throws Exception {
        try (Connection conn = DriverManager.getConnection(url, username, password)) {
            String sql = &quot;INSERT INTO ztest_issues(title, summary, cdate) VALUES(?, ?, ?)&quot;;
            System.out.println(&quot;Sql: &quot; + sql);
            PreparedStatement ps = conn.prepareStatement(sql);

            String testId = &quot;&quot; + System.currentTimeMillis();

            ps.setObject(1, &quot;English Locale &quot; + testId);
            ps.setObject(2, &quot;Just a test&quot;);
            ps.setObject(3, new Date());
            int result = ps.executeUpdate();
            System.out.println(&quot;Insert Result: &quot; + result);

            ps.setObject(1, &quot;Chinese Locale &quot; + testId);
            ps.setObject(2, &quot;&amp;#21482;&amp;#26159;&amp;#19968;&amp;#20491;&amp;#28204;&amp;#35430;&quot;);
            ps.setObject(3, new Date());
            result = ps.executeUpdate();
            System.out.println(&quot;Insert Result: &quot; + result);

            ps.setObject(1, &quot;Spanish Locale &quot; + testId);
            ps.setObject(2, &quot;SÃ³lo una prueba&quot;);
            ps.setObject(3, new Date());
            result = ps.executeUpdate();
            System.out.println(&quot;Insert Result: &quot; + result);
        }
    }
}
</code></pre>
</p>
  			<a href="blog/2015/11/conemu-a-terminal-windows-or-tab-manager.html"><h1>ConEmu - a Terminal Windows or Tab Manager</h1></a>
  			<p>01 November 2015, tags: 
			    <a href="../tags/shell.html">shell</a> 
  			</p>
  			<p><div class="paragraph">
<p>Just learned about ConEmu project at <a href="https://conemu.github.io" class="bare">https://conemu.github.io</a> and it&#8217;s pretty awesome!</p>
</div>
<div class="paragraph">
<p>Thanks Onur for the tips!</p>
</div></p>
  			<a href="blog/2015/10/how-to-view-unix-man-pages-with-browser.html"><h1>How to view Unix man pages with browser</h1></a>
  			<p>24 October 2015, tags: 
			    <a href="../tags/mac.html">mac</a> 

			    <a href="../tags/unix.html">unix</a> 
  			</p>
  			<p><p>I have come across this wonderful project called Bwana (<a href="https://www.bruji.com/bwana/">https://www.bruji.com/bwana/</a>) for Mac. Install it and you can view any man page on the browser. For example try typing the following address on the Safari:</p>
<p>man:find</p>
<p>And you will see something like this:</p>
<p><a href="http://1.bp.blogspot.com/-hJtb8OSJUcY/Vi0NzuU1aqI/AAAAAAAAArk/VxH6rcjZE6g/s1600/grab1.tiff"><img src="http://1.bp.blogspot.com/-hJtb8OSJUcY/Vi0NzuU1aqI/AAAAAAAAArk/VxH6rcjZE6g/s320/grab1.tiff" alt="" /></a></p>
</p>
  			<a href="blog/2015/10/how-to-setup-a-new-trac-issue-tracking-system.html"><h1>How to setup a new Trac issue tracking system</h1></a>
  			<p>21 October 2015, tags: 
			    <a href="../tags/python.html">python</a> 

			    <a href="../tags/issue-tracker.html">issue-tracker</a> 
  			</p>
  			<p><p>Here is how I setup a local instance of Trac (a python based issue tracking web application) on my Mac.</p>
<p>Prerequisite: MySQL 5.6 and Python 2.7 (Python3 will not work with Trac yet!)</p>
<p>Step1: Setup a Trac database and a user</p>
<pre><code>sql&gt; CREATE DATABASE trac DEFAULT CHARACTER SET utf8 COLLATE utf8_bin;
sql&gt; CREATE USER 'dev'@'localhost' IDENTIFIED BY 'dev123';
sql&gt; GRANT ALL ON trac.* TO 'dev'@'localhost';


Step2: Install MySQL adaptor for Python and Trac

bash&gt; pip install Genshi trac mysqlclient


Step3: Setup a Track instance

bash&gt; trac-admin /Users/zemian/dev/mytrac intent

bash&gt; # Above will prompt you to enter a backend string. Use
bash&gt; # this connection string: 

bash&gt; #   mysql://dev:dev123@localhost:3306/trac

Step3: Create a Trac admin user

bash&gt; htpasswd -c /Users/zemian/dev/mytrac/.htpasswd admin

Step4: Run Track

bash&gt; tracd -p 8000 --basic-auth=&quot;mytrac,/Users/zemian/dev/mytrac/.htpasswd,mytrac&quot; /Users/zemian/dev/metric
</code></pre>
</p>
  			<a href="blog/2015/10/mysqlclient-gives-library-not-loaded-libmysqlclient-18-dylib-error.html"><h1>mysqlclient gives &quot;Library not loaded: libmysqlclient.18.dylib&quot; error</h1></a>
  			<p>16 October 2015, tags: 
			    <a href="../tags/python.html">python</a> 

			    <a href="../tags/mysql.html">mysql</a> 
  			</p>
  			<p><p>If you want to use python MySQLdb module (eg: if you run Trac with MySQL backend), you would need first install MySQL server on MacOSX, then install the mysqlclient python package using pip. However upon verifying it, you may encounter error like this:</p>
<p>(mypy-test)Zemians-Air:dev zemian$ pip install mysqlclient</p>
<p>Collecting mysqlclient</p>
<p>Using cached mysqlclient-1.3.6.tar.gz</p>
<p>Building wheels for collected packages: mysqlclient</p>
<p>Running setup.py bdist_wheel for mysqlclient</p>
<p>Stored in directory: /Users/zemian/Library/Caches/pip/wheels/9c/3b/73/8f16f45dc76999dafc2af06b0d6e1e669bc0e1594f41fcc2e8</p>
<p>Successfully built mysqlclient</p>
<p>Installing collected packages: mysqlclient</p>
<p>Successfully installed mysqlclient-1.3.6</p>
<p>(mypy-test)Zemians-Air:dev zemian$ python</p>
<p>Python 2.7.10 (default, Aug 22 2015, 20:33:39)</p>
<p>[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.1)] on darwin</p>
<p>Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</p>
<blockquote>
<blockquote>
<blockquote>
<p>import MySQLdb</p>
</blockquote>
</blockquote>
</blockquote>
<p>Traceback (most recent call last):</p>
<p>File &quot;<stdin>&quot;, line 1, in <module></p>
<p>File &quot;/Users/zemian/dev/mypy-test/lib/python2.7/site-packages/MySQLdb/<strong>init</strong>.py&quot;, line 19, in <module></p>
<pre><code>import _mysql
</code></pre>
<p>ImportError: dlopen(/Users/zemian/dev/mypy-test/lib/python2.7/site-packages/_mysql.so, 2): Library not loaded: libmysqlclient.18.dylib</p>
<p>Referenced from: /Users/zemian/dev/mypy-test/lib/python2.7/site-packages/_mysql.so</p>
<p>Reason: image not found</p>
<p>To resolve this, you need to add the following to your shell environment</p>
<p>export DYLD_LIBRARY_PATH=/usr/local/mysql/lib</p>
<p>Update 2016-06-17</p>
<p>To install mysqlclient on Ubuntu 14, you might need to first install the mysql_config first:</p>
<p>bash&gt; sudo apt-get install libmysqlclient-dev</p>
</p>
  			<a href="blog/2015/10/how-to-specify-same-target-table-for-update-in-from-clause.html"><h1>How to specify SAME target table for update in FROM clause</h1></a>
  			<p>11 October 2015, tags: 
			    <a href="../tags/mysql.html">mysql</a> 
  			</p>
  			<p><p>Have you tried updating something simple as following?</p>
<p>update category_tmp set last_update=NOW()<br />
where category_id in (<br />
select category_id from category_tmp where name like 'A%'<br />
);</p>
<p>In MySQL you will get an error like this:</p>
<p>Error Code: 1093. You can't specify target table 'category_tmp' for update in FROM clause.</p>
<p>So it says that you can't use the same update TABLE name within the sub query in where condition. The trick to get around this is to use another sub query in the where clause so it won't see the TABLE name being used! Here is a workaround:</p>
<p>update category_tmp set last_update=NOW()<br />
where category_id in (<br />
select category_id from (<br />
select category_id from category_tmp where name like 'A%'<br />
) ID_LIST<br />
);</p>
<p>Noticed that in MySQL, you must name your sub query result such as ID_LIST, in order for it to be re-select it again on the outer query! Otherwise it will error out with this:</p>
<p>Error Code: 1248. Every derived table must have its own alias</p>
</p>
  			<a href="blog/2015/10/macbook-air-is-not-displaying-scroll-bar-on-finder.html"><h1>MacBook Air is not displaying scroll bar on Finder</h1></a>
  			<p>10 October 2015, tags: 
			    <a href="../tags/mac.html">mac</a> 
  			</p>
  			<p><div class="paragraph">
<p>For odd reason that I don&#8217;t see scrollbar shows up on Finder in MacBook Air when I have a long list of files. Can&#8217;t scroll down with my trackpad, but I can do it with <code>Fn + Down Arrow</code> key though. To fix this, I have to go into System Preference, General and set "Show scroll bar" to "Always".</p>
</div></p>
  			<a href="blog/2015/10/setup-python-on-mac.html"><h1>Setup Python on Mac</h1></a>
  			<p>10 October 2015, tags: 
			    <a href="../tags/python.html">python</a> 

			    <a href="../tags/mac.html">mac</a> 
  			</p>
  			<p><h2></h2>
<p>Setup Python 2</p>
<p>The default MacOS should already come with latest Python 2.7. It will be pre-installed along with some pyobjc packages as well.</p>
<p>If you like to play around with python and external packages, it's best not to touch the original Python install from the System. Unfortunately, this Python 2.7 does not come with pip nor virtualenv packages to help setup separate environment! So it's okay to install these two into the system first. The easiest to setup is simply download get-pip.py from <a href="https://bootstrap.pypa.io/get-pip.py">https://bootstrap.pypa.io/get-pip.py</a>, then run</p>
<p>bash&gt; sudo python get-pip.py</p>
<p>With this, you may now able install virtualenv</p>
<p>bash&gt; sudo /usr/local/bin/pip install virtualenv</p>
<p>Now you can setup Python2 virtual env on a separate directory.</p>
<p>bash&gt; python -m virtualenv mypy</p>
<p>bash&gt; source mypy/bin/activate</p>
<p>(mypy) bash&gt; python -c 'import sys; print sys.path'</p>
<p>You should able to verify the output above that you are indeed using your own setup of an isolated  Python2 env, and it even has your own pip installed list, so you won't mess up the built-in System version of python!</p>
<h2></h2>
<p>Setup Python 3</p>
<p>The MacOS comes with latest Python 2.7, but no Python3. You can download the latest Python3 from python.org site and install it. It will give you a new 'python3' command so not to conflict with your existing Python. (NOTE: It's best not to remove or override the default Python2.7 that comes with the system!) But if you want to use 'python' command for Python3 for dev, then I suggest you create a new virtual environment of your own. The Python3 install should come with a 'pyvenv' command. For Example</p>
<p>bash&gt; pyvenv mypy3<br />
bash&gt; source mypy3/bin/activate<br />
(mypy3) bash&gt; python -c 'import sys; print(sys.path)'</p>
</p>
  			<a href="blog/2015/10/checking-mysql-database-connection-with-mysql-connector-python.html"><h1>Checking MySQL database connection with mysql-connector-python</h1></a>
  			<p>09 October 2015, tags: 
			    <a href="../tags/python.html">python</a> 

			    <a href="../tags/mysql.html">mysql</a> 
  			</p>
  			<p><p>First install the MySQL package</p>
<p>bash&gt;pip install --allow-all-external mysql-connector-python</p>
<p>Now you may test the database connection with this Python code</p>
<p>from mysql.connector import connect</p>
<p>conn = connect(user='dev', password='dev123', database='mysql')<br />
cur = conn.cursor()<br />
cur.execute('select 1+1')<br />
for row in cur:<br />
print(row)</p>
</p>

	<hr />

	<ul class="pager">
		<li class="previous"><a href="https://zemian.github.io/9">Previous</a></li>
		<li>Page: 10/29</li>
		<li class="next"><a href="https://zemian.github.io/11">Next</a></li>
	</ul>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2011 - Present Zemian Deng All Rights Reserved | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.6.5</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/jquery-1.11.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/prettify.js"></script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135626598-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-135626598-1');
    </script>

  </body>
</html>