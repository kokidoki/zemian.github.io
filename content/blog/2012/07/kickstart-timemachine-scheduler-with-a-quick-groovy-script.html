title=Kickstart TimeMachine Scheduler with a quick Groovy script
date=2012-07-09
type=post
tags=groovy, timemachine
status=published
~~~~~~
If you have <a href="http://groovy.codehaus.org/">Groovy </a>installed, you can kick start a <a href="https://bitbucket.org/timemachine/scheduler">TimeMachine Scheduler</a> job without any setup! Try this out:<br />
<br />
<br />
<span style="background-color: white; font-family: 'Courier New', Courier, monospace;">// Create a repeating schedule job that runs every 3 seconds.</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">@Grab('org.slf4j:slf4j-simple:1.6.6')</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">@Grab('org.bitbucket.timemachine:timemachine-scheduler:1.2.2')</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">import timemachine.scheduler.*</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">scheduler = new SchedulerFactory().createScheduler()</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">scheduler.init()</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">jobDef = JobDefs.groovyJobDef('''</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; println("Hello World.")</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">''')</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">jobDef.addSchedule(Schedules.secondly(3))</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">scheduler.schedule(jobDef)</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">scheduler.start()</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">addShutdownHook{ scheduler.destroy() }</span><br />
<br />
<br />