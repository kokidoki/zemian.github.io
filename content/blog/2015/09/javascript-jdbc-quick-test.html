title=JavaScript Jdbc Quick Test
date=2015-09-09
type=post
tags=javascript, jdbc
status=published
~~~~~~
<span style="font-family: Courier New, Courier, monospace;">importPackage(java.sql)</span><br />
<span style="font-family: Courier New, Courier, monospace;">url = "jdbc:mysql://localhost/test";</span><br />
<span style="font-family: Courier New, Courier, monospace;">username = "test";</span><br />
<span style="font-family: Courier New, Courier, monospace;">password = "test123";</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">// Util for nice print of result</span><br />
<span style="font-family: Courier New, Courier, monospace;">function printResultSet(rs) {</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"> </span>colCount = rs.getMetaData().getColumnCount();</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"> </span>while (rs.next()) {</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;">  </span>for (i=1; i &lt;= colCount; i++) {</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;">   </span>printf("%s\t", rs.getObject(i));</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;">  </span>}</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;">  </span>println();</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"> </span>}</span><br />
<span style="font-family: Courier New, Courier, monospace;">}</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">// Get a DB conn</span><br />
<span style="font-family: Courier New, Courier, monospace;">sql = "SELECT * FROM ztest_issues";</span><br />
<span style="font-family: Courier New, Courier, monospace;">conn = DriverManager.getConnection(url, username, password);</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">// Example of simple query</span><br />
<span style="font-family: Courier New, Courier, monospace;">st = conn.createStatement();</span><br />
<span style="font-family: Courier New, Courier, monospace;">rs = st.executeQuery(sql);</span><br />
<span style="font-family: Courier New, Courier, monospace;">while (rs.next()) {</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"> </span>for (i=1; i &lt;= 4; i++) {</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;">  </span>printf("%s\t", rs.getObject(i));</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"> </span>}</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"> </span>println();</span><br />
<span style="font-family: Courier New, Courier, monospace;">}</span><br />
<span style="font-family: Courier New, Courier, monospace;">st.close();</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">// Example of prepared statment with binding params</span><br />
<span style="font-family: Courier New, Courier, monospace;">sql = "SELECT * FROM ztest_issues WHERE title=?";</span><br />
<span style="font-family: Courier New, Courier, monospace;">st = conn.prepareStatement(sql);</span><br />
<span style="font-family: Courier New, Courier, monospace;">st.setObject(1, "test");</span><br />
<span style="font-family: Courier New, Courier, monospace;">rs = st.executeQuery();</span><br />
<span style="font-family: Courier New, Courier, monospace;">printResultSet(rs);</span><br />
<span style="font-family: Courier New, Courier, monospace;">st.close();</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">// Close DB conn</span><br />
<span style="font-family: Courier New, Courier, monospace;">conn.close();</span>