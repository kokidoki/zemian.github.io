title=Simple http server with CGI scripts enabled
date=2016-07-14
type=post
tags=python
status=published
~~~~~~
If you want to experiment some python code as CGI script to serve by a HTTP server,
you can get started by these steps:<br />
<ol>
<li>Create a <code>cgi-bin</code> directory.</li>
<li>Ready!</li>
</ol>
No, really, it's that simple! Try these CGI scripts out.<br />
<h2>
Example 1: <code>cgi-bin/hello.py</code></h2>
<pre><code>#!/usr/bin/env python3

localvars_table = '<table>'
for x in dir():
  localvars_table += '<tr><td>%s</td></tr>' % x
localvars_table += '</table>'

print("Content-type: text/html")
print("")
print("""<html><body>
<p>Hello World! Your custom CGI script is working. Here are your current Python local variables.</p>
%s
<p>NOTE: If you want to write useful CGI script, try the Python 'cgi' module. See cgitest.py script.</p>
</body></html>""" % (localvars_table))
</code></pre>
To test and run this, you simply invoke these couple commands:<br />
<pre><code>bash> chmod a+x cgi-bin/hello.py
bash> python3 -m http.server --cgi
</code></pre>
You may now test it on your browser with <a href="http://localhost:8000/cgi-bin/hello.py">http://localhost:8000/cgi-bin/hello.py</a>. Hit <code>CTRL+C</code> to stop the server.<br />
If you want to do more with fancy CGI scripts, try the Python's <code>cgi</code> module. Here is another example.<br />
<h2>
Example 2: <code>cgi-bin/cgitest.py</code></h2>
<pre><code>#!/usr/bin/env python3

import cgi
cgi.test()
</code></pre>
Again <code>chmod</code> your <code>cgitest.py</code> script and visit <a href="http://localhost:8000/cgi-bin/cgitest.py">http://localhost:8000/cgi-bin/cgitest.py</a>. You will see all the
HTTP related data as expected when working with a CGI script. See <a href="https://docs.python.org/3/library/cgi.html">https://docs.python.org/3/library/cgi.html</a>
for more details.