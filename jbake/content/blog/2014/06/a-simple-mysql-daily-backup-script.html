title=A simple MySQL daily backup script
date=2014-06-03
type=post
tags=mysql, backup
status=published
~~~~~~
Using the MySQL export script I've showed from <a href="http://saltnlight5.blogspot.com/2014/05/how-to-export-and-import-mysql-database.html">last post</a> (assume you saved it in a file named <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">"$HOME/database-export.sh")</span>, you may now perform a daily backup with your crontab service like this.<br />
<br />
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">#file:&nbsp;</span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">mysql-backups</span>.sh</span> </span><br />
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">DIR=`dirname $0`<br />echo "Backup DB with export script."<br />$DIR/database-export.sh</span><br />
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br />echo "Moving exported files into backup dir."</span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"></span><br />
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">DB_BAK_DIR=$HOME/mysql-backups/`date +%a`<br />echo "Removing old file (if exists) and saving new backup into $DB_BAK_DIR"<br />if [[ -e $DB_BAK_DIR ]]; then<br />&nbsp; rm -fv $DB_BAK_DIR/*<br />else<br />&nbsp; mkdir -p $DB_BAK_DIR<br />fi<br />cp -v $DIR/*.sql $DB_BAK_DIR</span><br />
<br />
This script should create a daily folder under your home directory, for example like "$HOME/mysql-backups/Mon", "Tue", "Wed" etc. It should save up to 7 days in a week if you run this with a daily cron job.<br />
<br />
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;"># crontab -e</span><br />
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@daily $HOME/</span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">mysql-backups</span>.sh &gt; /dev/null 2&gt;&amp;1</span><br />
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br /></span>
This is not the most robust way of backing up your DB, but it's a simple solution if you just want something quick up and running without worry too much.<br />
<br />